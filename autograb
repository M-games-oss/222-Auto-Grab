local Players = game:GetService("Players")

local RunService = game:GetService("RunService")

local player = Players.LocalPlayer

local autoGrabConnection = nil

local pickupRadius = 15

local cooldownTime = 0.5

local onCooldown = false

local function tryPickup()

    if onCooldown then return end

    

    local char = player.Character

    local root = char and char:FindFirstChild("HumanoidRootPart")

    if not root then return end

    

    local closestPrompt

    local closestDist = pickupRadius

    

    for _, prompt in ipairs(workspace:GetDescendants()) do

        if prompt:IsA("ProximityPrompt") and prompt.Enabled then

            

            -- ❌ IGNORA PROMPTS DE VENDA

            local action = (prompt.ActionText or ""):lower()

            local object = (prompt.ObjectText or ""):lower()

            local parentName = prompt.Parent and prompt.Parent.Name:lower() or ""

            

            if action:find("sell") or object:find("sell") or parentName:find("sell") then

                continue

            end

            

            local part = prompt:FindFirstAncestorWhichIsA("BasePart")

            if part then

                local dist = (part.Position - root.Position).Magnitude

                if dist <= closestDist then

                    closestDist = dist

                    closestPrompt = prompt

                end

            end

        end

    end

    

    if not closestPrompt then return end

    

    fireproximityprompt(closestPrompt, closestPrompt.HoldDuration)

    

    onCooldown = true

    task.delay(cooldownTime, function()

        onCooldown = false

    end)

end

local function toggleAutoGrab(state)

    if autoGrabConnection then 

        autoGrabConnection:Disconnect() 

        autoGrabConnection = nil 

    end

    

    if state then

        autoGrabConnection = RunService.Heartbeat:Connect(function()

            tryPickup()

        end)

        print("✅ Auto Grab ON")

    else

        print("❌ Auto Grab OFF")

    end

end

-- Teste: Ativar Auto Grab

toggleAutoGrab(true)

-- Para desativar: toggleAutoGrab(false)
